<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Mon Caveau - Se connecter</title>

    <link rel="icon" type="image/x-icon" href="/v1/icon/favicon.ico">
    <link rel="stylesheet" href="/v1/css/login.css">
</head>

<body>
    <div class="main-container">
        <header class="header">
            <img src="/v1/images/logo.png" alt="Logo de Mon Caveau" class="logo">
        </header>

        <section class="login-section">
            <h1 class="title">Se connecter à <span>Mon Caveau</span></h1>
            <form id="loginForm" method="POST" class="login-form">
                <div class="input-group">
                    <input type="text" name="account_key" id="account_key" 
                           placeholder="Clé de compte (xxxxxx-xxxxxx-xxxxxx)" 
                           maxlength="20" 
                           pattern="\d{6}-\d{6}-\d{6}" 
                           required>
                </div>
                <div class="remember-me">
                    <input type="checkbox" id="rememberMe" name="rememberMe">
                    <label for="rememberMe">Se souvenir de moi</label>
                </div>
                <button type="submit" class="cta-button">Se connecter</button>
            </form>
            <div class="info-text">
                <p>Pas de compte ?</p>
                <button class="register-button" onclick="generateAccountKey()">Créer un compte</button>
            </div>
        </section>

        <footer class="footer">
            <p>&copy; 2025 Mon Caveau. Tous droits réservés.</p>
        </footer>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
            <h2>Nouvelle clé générée</h2>
            <p id="newAccountKey"></p>
            <button id="saveKeyButton">Sauvegarder la clé</button>
            <button onclick="closeModal('registerModal')">Fermer</button>
        </div>
    </div>

    <div id="loggedInModal" class="modal">
        <div class="modal-content">
            <h2>Vous êtes déjà connecté !</h2>
            <p>Redirection vers votre tableau de bord dans <span id="countdown">3</span> secondes...</p>
        </div>
    </div>

    <div id="errorModal" class="modal">
        <div class="modal-content">
            <h2>Erreur</h2>
            <p>Clé de compte invalide. Veuillez réessayer.</p>
            <button onclick="closeModal('errorModal')">Fermer</button>
        </div>
    </div>

    <script src="/v1/js/login.js"></script>
    <script>
        offerRedirectIfAlreadyLoggedIn({{.LoggedIn }});
    </script>
</body>

</html>